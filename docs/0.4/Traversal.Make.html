<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="Start" href="index.html">
<link rel="Up" href="Traversal.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="ID" rel="Chapter" href="ID.html">
<link title="Var" rel="Chapter" href="Var.html">
<link title="MetaVar" rel="Chapter" href="MetaVar.html">
<link title="Location" rel="Chapter" href="Location.html">
<link title="Intf" rel="Chapter" href="Intf.html">
<link title="Utils" rel="Chapter" href="Utils.html">
<link title="Transform" rel="Chapter" href="Transform.html">
<link title="UntypedAST" rel="Chapter" href="UntypedAST.html">
<link title="Model" rel="Chapter" href="Model.html">
<link title="TypeUnify" rel="Chapter" href="TypeUnify.html">
<link title="Problem" rel="Chapter" href="Problem.html">
<link title="FO" rel="Chapter" href="FO.html">
<link title="Reduce" rel="Chapter" href="Reduce.html">
<link title="Env" rel="Chapter" href="Env.html">
<link title="Statement" rel="Chapter" href="Statement.html">
<link title="FO_tptp" rel="Chapter" href="FO_tptp.html">
<link title="FO_rel" rel="Chapter" href="FO_rel.html">
<link title="Cardinality" rel="Chapter" href="Cardinality.html">
<link title="Scheduling" rel="Chapter" href="Scheduling.html">
<link title="Polarity" rel="Chapter" href="Polarity.html">
<link title="Traversal" rel="Chapter" href="Traversal.html">
<link title="ProblemMetadata" rel="Chapter" href="ProblemMetadata.html">
<link title="AnalyzeType" rel="Chapter" href="AnalyzeType.html">
<link title="Prelude" rel="Chapter" href="Prelude.html">
<link title="TypeCheck" rel="Chapter" href="TypeCheck.html">
<link title="Lazy_list" rel="Chapter" href="Lazy_list.html">
<link title="Bit_set" rel="Chapter" href="Bit_set.html">
<link title="Sexp_lib" rel="Chapter" href="Sexp_lib.html">
<link title="Sexp_lex" rel="Chapter" href="Sexp_lex.html">
<link title="Precedence" rel="Chapter" href="Precedence.html">
<link title="Binder" rel="Chapter" href="Binder.html">
<link title="Builtin" rel="Chapter" href="Builtin.html">
<link title="Cardinal_encode" rel="Chapter" href="Cardinal_encode.html">
<link title="TermInner" rel="Chapter" href="TermInner.html">
<link title="TermTyped" rel="Chapter" href="TermTyped.html">
<link title="Pattern" rel="Chapter" href="Pattern.html">
<link title="TypePoly" rel="Chapter" href="TypePoly.html">
<link title="TypeMono" rel="Chapter" href="TypeMono.html">
<link title="Parsing_utils" rel="Chapter" href="Parsing_utils.html">
<link title="Lexer" rel="Chapter" href="Lexer.html">
<link title="Parser" rel="Chapter" href="Parser.html">
<link title="TPTP_print" rel="Chapter" href="TPTP_print.html">
<link title="TPTP_lexer" rel="Chapter" href="TPTP_lexer.html">
<link title="TPTP_parser" rel="Chapter" href="TPTP_parser.html">
<link title="TPTP_preprocess" rel="Chapter" href="TPTP_preprocess.html">
<link title="TPTP_model_ast" rel="Chapter" href="TPTP_model_ast.html">
<link title="TPTP_model_lexer" rel="Chapter" href="TPTP_model_lexer.html">
<link title="TPTP_model_parser" rel="Chapter" href="TPTP_model_parser.html">
<link title="Ast_kodkod" rel="Chapter" href="Ast_kodkod.html">
<link title="Lex_kodkod" rel="Chapter" href="Lex_kodkod.html">
<link title="Parse_kodkod" rel="Chapter" href="Parse_kodkod.html">
<link title="Tip_ast" rel="Chapter" href="Tip_ast.html">
<link title="Tip_parser" rel="Chapter" href="Tip_parser.html">
<link title="Tip_lexer" rel="Chapter" href="Tip_lexer.html">
<link title="Parse_tip" rel="Chapter" href="Parse_tip.html">
<link title="Skolem" rel="Chapter" href="Skolem.html">
<link title="TypeInference" rel="Chapter" href="TypeInference.html">
<link title="ElimPatternMatch" rel="Chapter" href="ElimPatternMatch.html">
<link title="Monomorphization" rel="Chapter" href="Monomorphization.html">
<link title="Specialize" rel="Chapter" href="Specialize.html">
<link title="LambdaLift" rel="Chapter" href="LambdaLift.html">
<link title="Elim_HOF" rel="Chapter" href="Elim_HOF.html">
<link title="ElimRecursion" rel="Chapter" href="ElimRecursion.html">
<link title="ElimMultipleEqns" rel="Chapter" href="ElimMultipleEqns.html">
<link title="ElimIndPreds" rel="Chapter" href="ElimIndPreds.html">
<link title="ElimQuantifiers" rel="Chapter" href="ElimQuantifiers.html">
<link title="ElimCopy" rel="Chapter" href="ElimCopy.html">
<link title="Polarize" rel="Chapter" href="Polarize.html">
<link title="Unroll" rel="Chapter" href="Unroll.html">
<link title="IntroGuards" rel="Chapter" href="IntroGuards.html">
<link title="Model_clean" rel="Chapter" href="Model_clean.html">
<link title="ElimData" rel="Chapter" href="ElimData.html">
<link title="ElimTypes" rel="Chapter" href="ElimTypes.html">
<link title="Elim_prop_args" rel="Chapter" href="Elim_prop_args.html">
<link title="Elim_ite" rel="Chapter" href="Elim_ite.html">
<link title="Elim_infinite" rel="Chapter" href="Elim_infinite.html">
<link title="Trans_ho_fo" rel="Chapter" href="Trans_ho_fo.html">
<link title="Trans_fo_tptp" rel="Chapter" href="Trans_fo_tptp.html">
<link title="Lift_undefined" rel="Chapter" href="Lift_undefined.html">
<link title="FoToRelational" rel="Chapter" href="FoToRelational.html"><title>Nunchaku documentation : Traversal.Make</title>
</head>
<body>
<div class="navbar">&nbsp;<a class="up" href="Traversal.html" title="Traversal">Up</a>
&nbsp;</div>
<h1>Functor <a href="type_Traversal.Make.html">Traversal.Make</a></h1>

<pre><span class="keyword">module</span> Make <code class="code">(</code><code class="code"><span class="constructor">T</span></code><code class="code">&nbsp;:&nbsp;</code><code class="type"><a href="TermInner.S.html">TermInner.S</a></code><code class="code">)&nbsp;</code> <code class="code">(</code><code class="code"><span class="constructor">Arg</span></code><code class="code">&nbsp;:&nbsp;</code><code class="type"><a href="Traversal.ARG.html">ARG</a></code><code class="code">)&nbsp;</code> <code class="code">(</code><code class="code"><span class="constructor">State</span></code><code class="code">&nbsp;:&nbsp;</code><code class="code"><span class="keyword">sig</span></code><div class="sig_block">
<pre><span id="TYPEt"><span class="keyword">type</span> <code class="type"></code>t</span> </pre>

</div><code class="code"><span class="keyword">end</span></code><code class="code">)&nbsp;</code>: <code class="code"><span class="keyword">sig</span></code> <a href="Traversal.Make.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><table border="0" cellpadding="3" width="100%">
<tr>
<td align="left" valign="top" width="1%%"><b>Parameters: </b></td>
<td>
<table class="paramstable">
<tr>
<td align="center" valign="top" width="15%">
<code>T</code></td>
<td align="center" valign="top">:</td>
<td><code class="type"><a href="TermInner.S.html">TermInner.S</a></code>
<tr>
<td align="center" valign="top" width="15%">
<code>Arg</code></td>
<td align="center" valign="top">:</td>
<td><code class="type"><a href="Traversal.ARG.html">ARG</a></code>
<tr>
<td align="center" valign="top" width="15%">
<code>State</code></td>
<td align="center" valign="top">:</td>
<td><code class="type">sig type t end</code>
</table>
</td>
</tr>
</table>
<hr width="100%">

<pre><span id="TYPEterm"><span class="keyword">type</span> <code class="type"></code>term</span> = <code class="type">T.t</code> </pre>


<pre><span id="TYPEty"><span class="keyword">type</span> <code class="type"></code>ty</span> = <code class="type">T.t</code> </pre>


<pre><span id="TYPEt"><span class="keyword">type</span> <code class="type"></code>t</span> </pre>
<div class="info ">
A stateful object used for traversing a problem, eventually
      building a new list of statements<br>
</div>


<pre><code><span id="TYPEdispatch"><span class="keyword">type</span> <code class="type"></code>dispatch</span> = {</code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTdispatch.do_term">do_term</span>&nbsp;: <code class="type"><a href="Traversal.Make.html#TYPEt">t</a> -> depth:int -> <a href="Traversal.Make.html#TYPEterm">term</a> -> <a href="Traversal.Make.html#TYPEterm">term</a></code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTdispatch.do_goal_or_axiom">do_goal_or_axiom</span>&nbsp;: <code class="type">(<a href="Traversal.Make.html#TYPEt">t</a> -><br>        depth:int -><br>        [ `Axiom | `Goal ] -> <a href="Traversal.Make.html#TYPEterm">term</a> -> <a href="Traversal.Make.html#TYPEterm">term</a>)<br>       option</code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTdispatch.do_def">do_def</span>&nbsp;: <code class="type"><a href="Traversal.Make.html#TYPEt">t</a> -><br>       depth:int -><br>       (<a href="Traversal.Make.html#TYPEterm">term</a>, <a href="Traversal.Make.html#TYPEty">ty</a>) <a href="Statement.html#TYPErec_def">Statement.rec_def</a> -><br>       Arg.t -> (<a href="Traversal.Make.html#TYPEterm">term</a>, <a href="Traversal.Make.html#TYPEty">ty</a>) <a href="Statement.html#TYPErec_def">Statement.rec_def</a></code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTdispatch.do_pred">do_pred</span>&nbsp;: <code class="type"><a href="Traversal.Make.html#TYPEt">t</a> -><br>       depth:int -><br>       [ `Not_wf | `Wf ] -><br>       [ `Copred | `Pred ] -><br>       (<a href="Traversal.Make.html#TYPEterm">term</a>, <a href="Traversal.Make.html#TYPEty">ty</a>) <a href="Statement.html#TYPEpred_def">Statement.pred_def</a> -><br>       Arg.t -> (<a href="Traversal.Make.html#TYPEterm">term</a>, <a href="Traversal.Make.html#TYPEty">ty</a>) <a href="Statement.html#TYPEpred_def">Statement.pred_def</a></code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTdispatch.do_copy">do_copy</span>&nbsp;: <code class="type">(<a href="Traversal.Make.html#TYPEt">t</a> -><br>        depth:int -><br>        loc:<a href="Location.html#TYPEt">Location.t</a> option -><br>        (<a href="Traversal.Make.html#TYPEterm">term</a>, <a href="Traversal.Make.html#TYPEty">ty</a>) <a href="Statement.html#TYPEcopy">Statement.copy</a> -><br>        Arg.t -> (<a href="Traversal.Make.html#TYPEterm">term</a>, <a href="Traversal.Make.html#TYPEty">ty</a>) <a href="Statement.html#TYPEcopy">Statement.copy</a>)<br>       option</code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTdispatch.do_spec">do_spec</span>&nbsp;: <code class="type">(<a href="Traversal.Make.html#TYPEt">t</a> -><br>        depth:int -><br>        loc:<a href="Location.html#TYPEt">Location.t</a> option -><br>        <a href="ID.html#TYPEt">ID.t</a> -><br>        (<a href="Traversal.Make.html#TYPEterm">term</a>, <a href="Traversal.Make.html#TYPEty">ty</a>) <a href="Statement.html#TYPEspec_defs">Statement.spec_defs</a> -><br>        Arg.t -> (<a href="Traversal.Make.html#TYPEterm">term</a>, <a href="Traversal.Make.html#TYPEty">ty</a>) <a href="Statement.html#TYPEspec_defs">Statement.spec_defs</a>)<br>       option</code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTdispatch.do_data">do_data</span>&nbsp;: <code class="type">(<a href="Traversal.Make.html#TYPEt">t</a> -><br>        depth:int -><br>        [ `Codata | `Data ] -><br>        <a href="Traversal.Make.html#TYPEterm">term</a> <a href="Statement.html#TYPEdata_type">Statement.data_type</a> -><br>        Arg.t -> <a href="Traversal.Make.html#TYPEterm">term</a> <a href="Statement.html#TYPEdata_type">Statement.data_type</a>)<br>       option</code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTdispatch.do_ty_def">do_ty_def</span>&nbsp;: <code class="type">(<a href="Traversal.Make.html#TYPEt">t</a> -><br>        ?loc:<a href="Location.html#TYPEt">Location.t</a> -><br>        <a href="Traversal.Make.html#TYPEty">ty</a> <a href="Statement.html#TYPEdefined">Statement.defined</a> -><br>        Arg.t -> <a href="Traversal.Make.html#TYPEty">ty</a> <a href="Statement.html#TYPEdefined">Statement.defined</a>)<br>       option</code>;</code></td>

</tr></table>
}



<pre><span id="VALcreate"><span class="keyword">val</span> create</span> : <code class="type">?size:int -><br>       ?max_depth:int -><br>       env:(<a href="Traversal.Make.html#TYPEterm">term</a>, <a href="Traversal.Make.html#TYPEty">ty</a>) <a href="Env.html#TYPEt">Env.t</a> -><br>       state:State.t -> dispatch:<a href="Traversal.Make.html#TYPEdispatch">dispatch</a> -> unit -> <a href="Traversal.Make.html#TYPEt">t</a></code></pre><div class="info ">
create a new traversal object.<br>
</div>
<div class="param_info"><code class="code">env</code> : the environment in which symbols are defined</div>
<div class="param_info"><code class="code">dispatch</code> : how to deal with definitions of symbols.
        Fields that are not specified are dealt with generically</div>

<pre><span id="VALenv"><span class="keyword">val</span> env</span> : <code class="type"><a href="Traversal.Make.html#TYPEt">t</a> -> (<a href="Traversal.Make.html#TYPEterm">term</a>, <a href="Traversal.Make.html#TYPEty">ty</a>) <a href="Env.html#TYPEt">Env.t</a></code></pre>
<pre><span id="VALstate"><span class="keyword">val</span> state</span> : <code class="type"><a href="Traversal.Make.html#TYPEt">t</a> -> State.t</code></pre>
<pre><span id="VALhas_processed"><span class="keyword">val</span> has_processed</span> : <code class="type"><a href="Traversal.Make.html#TYPEt">t</a> -> <a href="ID.html#TYPEt">ID.t</a> -> Arg.t -> bool</code></pre><div class="info ">
Has <code class="code">mark_processed</code> already been called with those arguments?<br>
</div>

<pre><span id="VALmark_processed"><span class="keyword">val</span> mark_processed</span> : <code class="type"><a href="Traversal.Make.html#TYPEt">t</a> -> <a href="ID.html#TYPEt">ID.t</a> -> Arg.t -> unit</code></pre><div class="info ">
To be used by callbacks in <code class="code">dispatch</code> to indicate that some additional
      IDs have been processed (e.g. the conversion functions of copy types)<br>
</div>

<pre><span id="VALprocessed"><span class="keyword">val</span> processed</span> : <code class="type"><a href="Traversal.Make.html#TYPEt">t</a> -> (<a href="ID.html#TYPEt">ID.t</a> * Arg.t) Sequence.t</code></pre><div class="info ">
All processed pairs<br>
</div>

<pre><span id="VALcall_dep"><span class="keyword">val</span> call_dep</span> : <code class="type"><a href="Traversal.Make.html#TYPEt">t</a> -> depth:int -> <a href="ID.html#TYPEt">ID.t</a> -> Arg.t -> unit</code></pre><div class="info ">
<code class="code">call_dep&nbsp;t&nbsp;id&nbsp;arg</code> is to be called during term traversal (typically,
      in <code class="code">dispatch.do_term</code>) to indicate the will of traversing the
      pair <code class="code">(id,arg)</code><br>
</div>

<pre><span id="EXCEPTIONCannotTraverse"><span class="keyword">exception</span> CannotTraverse</span></pre>

<pre><span id="VALtraverse_stmt"><span class="keyword">val</span> traverse_stmt</span> : <code class="type">?after_env:((<a href="Traversal.Make.html#TYPEterm">term</a>, <a href="Traversal.Make.html#TYPEty">ty</a>) <a href="Env.html#TYPEt">Env.t</a> -> unit) -><br>       <a href="Traversal.Make.html#TYPEt">t</a> -><br>       (<a href="Traversal.Make.html#TYPEterm">term</a>, <a href="Traversal.Make.html#TYPEty">ty</a>) <a href="Statement.html#TYPEt">Statement.t</a> -> unit</code></pre><div class="info ">
Traverse the given statement, adding its translation to the result,
      updating the environment, etc.<br>
<b>Raises</b> <code>CannotTraverse</code> if <code class="code">get_statements</code> was called already<br>
</div>
<div class="param_info"><code class="code">after_env</code> : called once the environment is updated, but
      before the statment is actually traversed</div>

<pre><span id="VALget_statements"><span class="keyword">val</span> get_statements</span> : <code class="type"><a href="Traversal.Make.html#TYPEt">t</a> -><br>       (<a href="Traversal.Make.html#TYPEterm">term</a>, <a href="Traversal.Make.html#TYPEty">ty</a>) <a href="Statement.html#TYPEt">Statement.t</a> CCVector.vector</code></pre><div class="info ">
<code class="code">get_statements&nbsp;t</code> sorts topologically and merges the pieces of statements
      previously added by <code class="code">push_rec</code>, <code class="code">push_pred</code>, etc. and
      returns a valid list of statements.
      Once <code class="code">get_statements</code> has been called, <code class="code">traverse_stmt</code> will
      raise<br>
</div>

<pre><span id="VALmax_depth_reached"><span class="keyword">val</span> max_depth_reached</span> : <code class="type"><a href="Traversal.Make.html#TYPEt">t</a> -> bool</code></pre></body></html>